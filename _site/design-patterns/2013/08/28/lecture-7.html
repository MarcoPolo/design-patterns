<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Lecture #7</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">

    </head>
    <body>

        <div class="container">
          <div class="site">
            <div class="header">
              <h1 class="title"><a href="/">Design Patterns</a></h1>
              <a class="extra" href="/">home</a>
            </div>

                <h2>Lecture #7</h2>
<p class="meta">28 Aug 2013</p>

<div class="post">
<h1 id="toc_0">Adminstrivia</h1>
<div class="highlight"><pre><code class="text language-text" data-lang="text">* Read Template Method (325)
</code></pre></div>
<h1 id="toc_1">Implementation (cont.)</h1>

<p>3a. <del>Pair a constant method with a FM</del>
Ditch the FM: Just use CM</p>

<h1 id="toc_2">Discussion: 3 &amp; 3a</h1>

<p>Q: What is the implication of the <strong>productClass</strong> variable not being decalred final?<br>
A: Can be changed later</p>

<p>Note: we <em>could</em> move the responsibility for maintaining the <strong>productClass</strong> variable to the <strong>Creator</strong>.
if there is more than one <strong>CCreator</strong> type used in the application, they would be sharing the same variable 
(hence, the same <strong>CProduct</strong>) - the most recently assigined value [Again, probably <em>undesirable behavior</em>]</p>

<h1 id="toc_3">4) parameterice the CCreator with a Prototype (117); The FM returns clones of the Prototype</h1>

<div class="highlight"><pre><code class="java">    <span class="kd">static</span> <span class="kd">private</span> <span class="n">Product</span> <span class="n">productPrototype</span><span class="o">;</span>
    <span class="kd">static</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setProduct</span><span class="o">(</span><span class="n">Product</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">productPrototype</span> <span class="o">=</span> <span class="n">p</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">Product</span> <span class="nf">makeProduct</span><span class="o">(){</span>
        <span class="k">return</span> <span class="n">productPrototype</span><span class="o">.</span><span class="na">clone</span><span class="o">();</span>
    <span class="o">}</span>
</code></pre></div>

<p>If <strong>productPrototype</strong> is <em>not</em> <code>static</code>, then each instance of the <strong>CCreator</strong> would have its own Prototype object and they could have different <strong>CProducts</strong>.</p>

<p>(can lead to bizarre systems)</p>

<h1 id="toc_4">5) Use Templates/Generics/parameterized classes</h1>

<p>avoids the need to <em>explicitly</em> subclass the <strong>Creator</strong> to specify the <strong>CProduct</strong> type. 
(could argue that it&#39;s still <em>implicitly</em> subclassing - it&#39;s just the compiler generating the subclass rather than the programer).</p>

<div class="highlight"><pre><code class="java">    <span class="kd">class</span> <span class="nc">Creator</span><span class="o">&lt;</span><span class="n">P</span> <span class="n">extend</span> <span class="n">Product</span><span class="o">&gt;</span> <span class="o">{</span>

        <span class="c1">// ...</span>

        <span class="kd">public</span> <span class="n">Product</span> <span class="nf">makeProduct</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="k">new</span> <span class="nf">P</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="c1">//...</span>
    <span class="o">}</span>
    
</code></pre></div>

<p>Usage example:
    <code>Creator&lt;DaveCoProduct&gt; creator = new Creator&lt;DaveCoProduct&gt;();</code></p>

<p>It could be argued that this is an alternative to FM rather than a variation vecause it 
explicitly ducksthe issue of sublassing.<br>
 [not to mention that there is no common type for <code>Creator&lt;Foo&gt;</code> and <code>Creator&lt;bar&gt;</code>.]</p>

<h1 id="toc_5">Template Method (325)</h1>

<h2 id="toc_6">Intent</h2>

<p>Define the skeleton of an algorithm as an operation, deferring some steps to subclasses.<br>
TM lets subclasses redefine certain steps of an algorithm w/o chaning the algorithm&#39;s structure</p>

<h2 id="toc_7">Initial Comments</h2>

<ul>
<li>One of the most frequently used design patterns</li>
<li>it&#39;s an example of &quot;good&quot; inheritance</li>
<li>depends on the <em>Hollywood Principle</em> 

<ul>
<li>&quot;Don&#39;t call us, we&#39;ll call you.&quot;</li>
<li>the <em>superclass</em> calls an operation defined in the _sub_class!</li>
<li><em>inverted control structure</em> (the &quot;normal&quot; being when the subclass calls methods defined by the superclass;)</li>
</ul></li>
</ul>

<h2 id="toc_8">Motivation</h2>

<p><strong><em>Goal</em></strong>: define an algorithm <em>once</em>, allow sublasses to redefine cetrain (reselected) steps as necessary.</p>

<h2 id="toc_9">Physical example</h2>

<p>Baking a cake consists of...<br>
1. Preheat the oven<br>
2. grease pans<br>
3. prepare the batter<br>
4. pour batter into ban<br>
5. put pans in oven and bake<br>
6. remove from oven and cool  </p>

<p>Certain steps of this process are <em>invariant</em>; while others (3,5, &amp; 7) depent on the the <em>kind</em> of cake being made.<br>
The <em>overall</em> alg. being thesame in all cases; we just wnat to costumize certain steps.</p>

</div>


            <div class="footer">
              <div class="contact">
                <p>
                  Your Name<br />
                  What You Are<br />
                  your@email.com
                </p>
              </div>
              <div class="contact">
                <p>
                  <a href="http://github.com/yourusername/">github.com/yourusername</a><br />
                  <a href="http://twitter.com/yourusername/">twitter.com/yourusername</a><br />
                </p>
              </div>
            </div>
          </div>
        </div> <!-- /container -->

    </body>
</html>
