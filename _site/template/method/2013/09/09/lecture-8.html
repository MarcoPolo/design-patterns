<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Lecture 8</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">

    </head>
    <body>

        <div class="container">
          <div class="site">
            <div class="header">
              <h1 class="title"><a href="/">Design Patterns</a></h1>
              <a class="extra" href="/">home</a>
            </div>

                <h2>Lecture 8</h2>
<p class="meta">09 Sep 2013</p>

<div class="post">
<h1 id="toc_0">Administivia</h1>

<ul>
<li>Read: Strategy (315)</li>
<li>Read: Template Method</li>
<li>HW 2 &amp; 3 online</li>
</ul>

<h1 id="toc_1">Template Method (325)</h1>

<p>There are several kinds of operations that can be used to implement a TM   </p>

<ul>
<li><em>concrete</em> (either on the <strong>Concrete</strong> class or client classes)<br></li>
<li><em>concrete Abstract class</em> ops<br></li>
<li><em>primitive</em> ops<br></li>
<li><em>factory methods</em> ops<br></li>
<li><em>hook</em> ops<br></li>
</ul>

<p>( if this &quot;concrete op&quot; on the Concrete class isn&#39;t  concrete abstract class op, primitive, FM, or hook, then what the heck is it?
 How can I (as the <strong>Abstract</strong> class) possibly foresee operations that the concrete class adds to its interface???   </p>

<p>This list really boils own to three...</p>

<table><thead>
<tr>
<th><strong>Method</strong></th>
<th align="center"><strong>Abstract Class&#39;s role</strong></th>
<th align="right"><strong>Concrete class&#39;s role</strong></th>
</tr>
</thead><tbody>
<tr>
<td><em>Concrete</em></td>
<td align="center">define</td>
<td align="right"><em>not</em> override</td>
</tr>
<tr>
<td><em>Primitive</em></td>
<td align="center">declare</td>
<td align="right"><em>must</em> override</td>
</tr>
<tr>
<td><em>Hook</em> *</td>
<td align="center">defined default behavior</td>
<td align="right"><em>may</em> override</td>
</tr>
</tbody></table>

<p>Q: why didn&#39;t FM make my condensed list of op types
A: Just a special case of...    </p>

<ul>
<li>In the case where there <em>is</em> a reasonable default behavior, then it&#39;s a <em>hook</em><br></li>
<li>Otherwise, it&#39;s a <em>primitive</em>.</li>
</ul>

<p>That said, it&#39;s still useful to say &quot;FMs can be used in a TM&quot; because of the semantic meainng:
FM&#39;s purpose is to create instance of a type.</p>

<hr>

<h1 id="toc_2">Implementation</h1>

<p>1) <em>access control modifiers</em> can be used to ensure that <em>primitives</em> don&#39;t &quot;leak&quot; into the type&#39;s interface.
 Declare primitives as <strong>protected</strong> instead of <strong>public</strong></p>

<p>2) <em>minimize the number of primitive ops</em> - the more primites one declares, the more work
the implemntor of the <strong>Concrete</strong> class will have to do. Therfore, if there is a 
reasonable default behavior, hake it a <em>hook</em> instead.</p>

<p>Note: there is a potential downside ot this advice:
if one forget ot implement a primitive, the compiler will yell at you. But if you forget to override a hook, the compiler won&#39;t give any warning.</p>

<h1 id="toc_3">designing and refactoring hierarchies for reuse</h1>
<div class="highlight"><pre><code class="text language-text" data-lang="text">General rule of thumb: move _behavior_ __up__ in a hierarch, move _state_ down 
</code></pre></div>
<p>Ken Auer&#39;s 4 heuristic
1) <em>define classes by behavior, not state</em><br>
&quot;What does it do?&quot; NOT &quot;What does it know?&quot;</p>

<p>2) <em>implemtn behavior with abstract state_Behaviors should be written in terms of _accessors</em> and <em>mutators</em></p>

<p>3) <em>identify message layers</em><br>
Implment behaviors in terms of a small set of override-able &quot;kernel methods&quot;</p>

<p>4) <em>defer identificaton of state variables</em>
Accessors and mutators are <em>declared</em> in the <em>base</em> class, but are implmented by the csubclasses (specifically, those in which the data members are defined)</p>

<h1 id="toc_4">A rather pirimitive method (ar ar) for generating TMs</h1>

<ol>
<li>Implment everything in a single, well comemented method</li>
<li>based on the comments, divide into logical steps</li>
<li>implement those steps as method</li>
<li>replace steps with calls to thos methods5. use <em>constant methods</em></li>
<li>lather-rinse-repeat for each step method</li>
</ol>

<h1 id="toc_5">Good programmin style guideline</h1>

<p>Every statement in a method should be at the <em>same</em> abstraction level</p>

<p>Compare: </p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">    Balance += deposit; //very specific
    //vs.
    updateBalance(deposit)
    //vs.
    updateBalance(deposit) //more abstract
</code></pre></div>
</div>


            <div class="footer">
              <div class="contact">
                <p>
                  Your Name<br />
                  What You Are<br />
                  your@email.com
                </p>
              </div>
              <div class="contact">
                <p>
                  <a href="http://github.com/yourusername/">github.com/yourusername</a><br />
                  <a href="http://twitter.com/yourusername/">twitter.com/yourusername</a><br />
                </p>
              </div>
            </div>
          </div>
        </div> <!-- /container -->

    </body>
</html>
